<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>pebble</title>
<style>
html,body,
#Pebble, #CoffeeScript, #JavaScript{
  box-sizing: border-box;
  position: relative;
  height: 100%;
  margin: 0px;
}
#Pebble, #CoffeeScript, #JavaScript{
  float: left;
  width: 33%;
  border: 1px solid black;
}
</style>
</head>
<body>
<textarea id="Pebble">
((. log console) :HelloPebble!)

(= number 42)
(= opposite true)

(= number (if opposite -42))

(= square (fn [x] (* x x)))

(= list [1 2 3 4 5])

(= math {
  :root   Math.sqrt
  :square square
  :cube   (fn [x] (* x (square x)))
})

(if (? elvis)
  (alert "I knew it!"))

(= cubes (for [num list] (math.cube num)))

(console.log cubes)
</textarea>
<textarea id="CoffeeScript"></textarea>
<textarea id="JavaScript"></textarea>
<script src="./lib/coffee-script.js"></script>
<script src="./bin/pebble.js"></script>
<script type="text/javascript">
(function(){
  window.addEventListener("load", function(){
    var pebbleEl = document.getElementById("Pebble");
    var coffeeEl = document.getElementById("CoffeeScript");
    var jsEl     = document.getElementById("JavaScript");
    pebbleEl.addEventListener("keyup", refresh);
    refresh();
    function refresh(){
      var pebbleCode = pebbleEl.value;
      var coffeeCode = Pebble.coffee(pebbleCode);
      var jsCode     = Pebble.compile(pebbleCode);
      coffeeEl.value = coffeeCode;
      jsEl.value     = jsCode;
      setTimeout(function(){Pebble.eval(pebbleCode);});
    }
  });
}());
</script>
</body>
</html>